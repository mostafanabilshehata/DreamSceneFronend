<div class="container product-details-container">
<div class="row align-items-center justify-content-between m-auto">
<div class="col-md-6">
      
          <!-- Bootstrap Carousel -->
          <div id="productGallery" class="carousel slide" data-bs-ride="true" data-bs-interval="3000" data-bs-touch="true" style="max-width: 660px;">
            <div class="carousel-inner">
              <div *ngFor="let item of imageDetails; let i = index" 
                   class="carousel-item" 
                   [class.active]="i === 0">
                <img [src]="item.itemImageSrc" class="d-block w-100" [alt]="item.alt" style="width: 100%; display: block;">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#productGallery" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#productGallery" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
            <!-- Thumbnails -->
            <div class="d-flex justify-content-center mt-2 flex-wrap" *ngIf="imageDetails.length > 1">
              <div *ngFor="let item of imageDetails; let i = index" class="p-1">
                <img [src]="item.thumbnailImageSrc" [alt]="item.alt" 
                     style="width: 80px; height: 80px; object-fit: cover; cursor: pointer;" 
                     class="img-thumbnail"
                     data-bs-target="#productGallery" 
                     [attr.data-bs-slide-to]="i">
              </div>
            </div>
          </div>
</div>
<div class="col-md-6">
<h3 class="h4 fw-bolder mb-2">{{itemDetails?.name}}</h3>
<p class="text-muted p-3">{{itemDetails?.description}}</p>

<!-- Pricing Section -->
<div class="pricing-section mb-3">
    <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="itemDetails?.salePrice">
        <div>
            <span class="text-muted">Sale Price:</span>
            <h4 class="text-success fw-bold mb-0">{{itemDetails?.salePrice}} EGP</h4>
        </div>
    </div>
    <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="itemDetails?.rentPrice">
        <div>
            <span class="text-muted">Rent Price:</span>
            <h4 class="text-primary fw-bold mb-0">{{itemDetails?.rentPrice}} EGP/day</h4>
        </div>
    </div>
</div>

<!-- Rating and Stock -->
<div class="d-flex align-items-center justify-content-between mb-3">
    <div *ngIf="itemDetails?.rating">
        <i class="fas fa-star rating-color"></i>
        <span class="text-muted fw-bold font-sm">{{itemDetails?.rating}}/5</span>
    </div>
    <div>
        <span class="badge bg-info">{{itemDetails?.availability}}</span>
        <span class="text-muted ms-2" *ngIf="itemDetails?.stockQuantity">Stock: {{itemDetails?.stockQuantity}}</span>
    </div>
</div>

<!-- Action Buttons -->
<div class="action-buttons">
    <!-- Success message when added to cart -->
    <div class="alert alert-success mb-3" *ngIf="addedToCart">
        <i class="fas fa-check-circle me-2"></i>
        Item added to basket successfully!
    </div>

    <!-- Quantity Selector -->
    <div class="mb-3" *ngIf="isInStock()">
        <label class="form-label fw-bold">Quantity:</label>
        <div class="input-group" style="max-width: 150px;">
            <button class="btn btn-outline-secondary" type="button" 
                    (click)="selectedQuantity = selectedQuantity > 1 ? selectedQuantity - 1 : 1">
                <i class="fas fa-minus"></i>
            </button>
            <input type="number" class="form-control text-center" 
                   [(ngModel)]="selectedQuantity" 
                   min="1" 
                   [max]="itemDetails?.stockQuantity || 1">
            <button class="btn btn-outline-secondary" type="button" 
                    (click)="selectedQuantity = selectedQuantity < (itemDetails?.stockQuantity || 1) ? selectedQuantity + 1 : selectedQuantity">
                <i class="fas fa-plus"></i>
            </button>
        </div>
    </div>

    <!-- Rent Days Selector (only show for rent items) -->
    <div class="mb-3" *ngIf="itemDetails?.availability === 'RENT' || itemDetails?.availability === 'BOTH'">
        <label class="form-label fw-bold">Rent Duration (Days):</label>
        <input type="number" class="form-control" 
               [(ngModel)]="selectedRentDays" 
               min="1" 
               placeholder="Number of days"
               style="max-width: 200px;">
        <small class="text-muted" *ngIf="itemDetails?.availability === 'RENT'">
            Total: {{(itemDetails?.rentPrice || 0) * selectedQuantity * selectedRentDays}} EGP
        </small>
    </div>

    <!-- Show Buy button ONLY if item is for SALE only -->
    <button class="pbtn bg-success text-white w-100 mb-2" 
            *ngIf="itemDetails?.availability === 'SALE'"
            [disabled]="!isInStock()"
            (click)="addToBuy()">
        <i class="fas fa-shopping-cart me-2"></i>
        Add to Cart (Buy) - {{itemDetails?.salePrice}} EGP
    </button>
    
    <!-- Show Rent button ONLY if item is for RENT only -->
    <button class="pbtn bg-primary text-white w-100 mb-2" 
            *ngIf="itemDetails?.availability === 'RENT'"
            [disabled]="!isInStock()"
            (click)="addToRent()">
        <i class="fas fa-calendar-alt me-2"></i>
        Add to Cart (Rent) - {{itemDetails?.rentPrice}} EGP/day
    </button>
    
    <!-- Show BOTH buttons if item supports BOTH -->
    <button class="pbtn bg-success text-white w-100 mb-2" 
            *ngIf="itemDetails?.availability === 'BOTH'"
            [disabled]="!isInStock()"
            (click)="addToBuy()">
        <i class="fas fa-shopping-cart me-2"></i>
        Add to Cart (Buy) - {{itemDetails?.salePrice}} EGP
    </button>
    
    <button class="pbtn bg-primary text-white w-100 mb-2" 
            *ngIf="itemDetails?.availability === 'BOTH'"
            [disabled]="!isInStock()"
            (click)="addToRent()">
        <i class="fas fa-calendar-alt me-2"></i>
        Add to Cart (Rent) - {{itemDetails?.rentPrice}} EGP/day Ã— {{selectedRentDays}} days
    </button>
    
    <!-- Out of Stock message -->
    <div class="alert alert-danger" *ngIf="!isInStock()">
        <i class="fas fa-exclamation-circle me-2"></i>
        Out of Stock
    </div>
</div>

<div class="card mt-3">
    
    <!-- Bootstrap Accordion -->
    <div class="accordion" id="productAccordion">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingDescription">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDescription" aria-expanded="true" aria-controls="collapseDescription">
                    Description
                </button>
            </h2>
            <div id="collapseDescription" class="accordion-collapse collapse show" aria-labelledby="headingDescription" data-bs-parent="#productAccordion">
                <div class="accordion-body">
                    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Doloribus unde eius similique, eum eligendi praesentium sint, quia illum quae error cupiditate est tempora! Recusandae modi eligendi dolor ipsam quam id?
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingSizeChart">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSizeChart" aria-expanded="false" aria-controls="collapseSizeChart">
                    Size Chart
                </button>
            </h2>
            <div id="collapseSizeChart" class="accordion-collapse collapse" aria-labelledby="headingSizeChart" data-bs-parent="#productAccordion">
                <div class="accordion-body">
            <table border="1" cellpadding="10" cellspacing="0">
                <thead>
                  <tr>
                    <th>Size</th>
                    <th>Chest (in)</th>
                    <th>Neck (in)</th>
                    <th>Waist (in)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>S</td>
                    <td>34-36</td>
                    <td>14-14.5</td>
                    <td>28-30</td>
                  </tr>
                  <tr>
                    <td>M</td>
                    <td>38-40</td>
                    <td>15-15.5</td>
                    <td>32-34</td>
                  </tr>
                  <tr>
                    <td>L</td>
                    <td>42-44</td>
                    <td>16-16.5</td>
                    <td>36-38</td>
                  </tr>
                  <tr>
                    <td>XL</td>
                    <td>46-48</td>
                    <td>17-17.5</td>
                    <td>40-42</td>
                  </tr>
                  <tr>
                    <td>XXL</td>
                    <td>50-52</td>
                    <td>18-18.5</td>
                    <td>44-46</td>
                  </tr>
                </tbody>
              </table>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingStore">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStore" aria-expanded="false" aria-controls="collapseStore">
                    Store Location
                </button>
            </h2>
            <div id="collapseStore" class="accordion-collapse collapse" aria-labelledby="headingStore" data-bs-parent="#productAccordion">
                <div class="accordion-body">
                    Content 2
                </div>
            </div>
        </div>
    </div>
 </div>
</div>
</div>
</div>